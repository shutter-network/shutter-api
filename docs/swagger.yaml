definitions:
  EventTriggerDefinitionRequest:
    properties:
      arguments:
        items:
          $ref: '#/definitions/usecase.EventArgument'
        type: array
      contract:
        example: 0x3465a347342B72BCf800aBf814324ba4a803c32b
        type: string
      eventSig:
        example: Transfer(address indexed from, address indexed to, uint256 amount)
        type: string
    type: object
  GetDataForEncryption:
    properties:
      eon:
        example: 1
        type: integer
      eon_key:
        example: 0x57af5437a84ef50e5ed75772c18ae38b168bb07c50cadb65fc6136604e662255
        type: string
      epoch_id:
        example: 0x88f2495d1240f9c5523db589996a50a4984ee7a08a8a8f4b269e4345b383310abd2dc1cd9c9c2b8718ed3f486d5242f5
        type: string
      identity:
        example: 0x8c232eae4f957259e9d6b68301d529e9851b8642874c8f59d2bd0fb84a570c75
        type: string
      identity_prefix:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
    type: object
  GetDecryptionKey:
    properties:
      decryption_key:
        example: 0x99a805fc26812c13041126b25e91eccf3de464d1df7a95d1edca8831a9ec02dd
        type: string
      decryption_timestamp:
        example: 1735044061
        type: integer
      identity:
        example: 0x8c232eae4f957259e9d6b68301d529e9851b8642874c8f59d2bd0fb84a570c75
        type: string
    type: object
  GetEventTriggerExpirationBlock:
    properties:
      expiration_block_number:
        example: 12345678
        type: integer
    type: object
  RegisterEventIdentityRequest:
    properties:
      identityPrefix:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
      triggerDefinition:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
      ttl:
        example: 100
        type: integer
    type: object
  RegisterIdentityRequest:
    properties:
      decryptionTimestamp:
        example: 1735044061
        type: integer
      identityPrefix:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
    type: object
  RegisterIdentityResponse:
    properties:
      eon:
        example: 1
        type: integer
      eon_key:
        example: 0x57af5437a84ef50e5ed75772c18ae38b168bb07c50cadb65fc6136604e662255
        type: string
      identity:
        example: 0x8c232eae4f957259e9d6b68301d529e9851b8642874c8f59d2bd0fb84a570c75
        type: string
      identity_prefix:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
      tx_hash:
        example: 0x3026ad202ca611551377eef069fb6ed894eae65329ce73c56f300129694f12ba
        type: string
    type: object
  error.Http:
    properties:
      description:
        type: string
      metadata:
        type: string
      statusCode:
        type: integer
    type: object
  usecase.EventArgument:
    properties:
      bytes:
        example: "0xabcdef01234567"
        type: string
      name:
        example: amount
        type: string
      number:
        example: "25433"
        type: string
      op:
        example: gte
        type: string
    type: object
  usecase.EventTriggerDefinitionResponse:
    properties:
      trigger_definition:
        example: 0x79bc8f6b4fcb02c651d6a702b7ad965c7fca19e94a9646d21ae90c8b54c030a0
        type: string
    type: object
info:
  contact: {}
  description: Shutter API is an encryption and decryption API that allows clients
    to register decryption triggers for specific encrypted messages. These triggers
    are invoked at a future time, eventually releasing the keys needed to decrypt
    the messages. Clients can specify the exact timestamp at which the trigger should
    release the decryption keys.
  title: Shutter API
paths:
  /compile_event_trigger_definition:
    post:
      description: This endpoint takes an event signature snippet and some arguments
        to create an event trigger definition that will be understood by keypers
      parameters:
      - description: Event signature and match arguments.
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/EventTriggerDefinitionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/usecase.EventTriggerDefinitionResponse'
        "400":
          description: Invalid Event Data.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Allows clients to compile an event trigger definition string.
      tags:
      - Crypto
  /decrypt_commitment:
    get:
      description: Provides a way for clients to easily decrypt their encrypted message
        for which they have registered the identity for. Timestamp with which the
        identity was registered should have been passed for the message to be decrypted
        successfully.
      parameters:
      - description: Identity used for registeration and encrypting the message.
        in: query
        name: identity
        required: true
        type: string
      - description: Encrypted commitment is the clients encrypted message.
        in: query
        name: encryptedCommitment
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            items:
              type: integer
            type: array
        "400":
          description: Invalid Decrypt commitment request.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Allows clients to decrypt their encrypted message.
      tags:
      - Crypto
  /get_data_for_encryption:
    get:
      description: Retrieves all the necessary data required by clients for encrypting
        any message. Supports both time-based and event-based identity computation.
        If triggerDefinition is provided, the identity will be computed for event-based
        triggers. Otherwise, it uses time-based identity computation.
      parameters:
      - description: 'Ethereum address associated with the identity. Time‑based: use
          the address that will register the identity (your account if self‑registering,
          or the API signer address below if you are using the API register endpoint).
          Event‑based (triggerDefinition provided): users cannot self‑register because
          the registry is owner‑only, please use the API signer address below. Gnosis
          Mainnet API address: 0x228DefCF37Da29475F0EE2B9E4dfAeDc3b0746bc Chiado API
          address: 0xb9C303443c9af84777e60D5C987AbF0c43844918'
        in: query
        name: address
        required: true
        type: string
      - description: Optional identity prefix. You can generate it on your end and
          pass it to this endpoint, or allow the API to randomly generate one for
          you.
        in: query
        name: identityPrefix
        type: string
      - description: Optional event trigger definition (hex-encoded with 0x prefix).
          If provided, identity will be computed for event-based triggers. This parameter
          is strictly for event-based triggers.
        in: query
        name: triggerDefinition
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/GetDataForEncryption'
        "400":
          description: Invalid Get data for encryption request.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Provides data necessary to allow encryption.
      tags:
      - Crypto
  /get_decryption_key:
    get:
      description: Retrieves a decryption key for a given registered identity once
        the timestamp is reached. Decryption key is 0x padded, clients need to remove
        the prefix when decrypting on their end.
      parameters:
      - description: Identity associated with the decryption key.
        in: query
        name: identity
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/GetDecryptionKey'
        "400":
          description: Invalid Get decryption key request.
          schema:
            $ref: '#/definitions/error.Http'
        "404":
          description: Decryption key not found for the associated identity.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Get decryption key.
      tags:
      - Crypto
  /get_event_trigger_expiration_block:
    get:
      description: Retrieves the expiration block number for a given event identity
        registration.
      parameters:
      - description: Eon number associated with the event identity registration.
        in: query
        name: eon
        required: true
        type: integer
      - description: Identity prefix associated with the event identity registration.
        in: query
        name: identityPrefix
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/GetEventTriggerExpirationBlock'
        "400":
          description: Invalid Get event identity registration expiration block number
            request.
          schema:
            $ref: '#/definitions/error.Http'
        "404":
          description: Event identity registration not found.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Get event identity registration expiration block number.
      tags:
      - Crypto
  /register_event_identity:
    post:
      description: Allows clients to register an identity used for encryption and
        event trigger definition for the decryption key associated with the encrypted
        message.
      parameters:
      - description: Event trigger definition, ttl and Identity which client want
          to make the registration with.
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/RegisterEventIdentityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/RegisterIdentityResponse'
        "400":
          description: Invalid Register identity request.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Allows clients to register an event trigger identity.
      tags:
      - Crypto
  /register_identity:
    post:
      description: Allows clients to register an identity used for encryption and
        specify a release timestamp for the decryption key associated with the encrypted
        message.
      parameters:
      - description: Timestamp and Identity which client want to make the registration
          with.
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/RegisterIdentityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Success.
          schema:
            $ref: '#/definitions/RegisterIdentityResponse'
        "400":
          description: Invalid Register identity request.
          schema:
            $ref: '#/definitions/error.Http'
        "429":
          description: Too many requests. Rate limited.
          schema:
            $ref: '#/definitions/error.Http'
        "500":
          description: Internal server error.
          schema:
            $ref: '#/definitions/error.Http'
      security:
      - BearerAuth: []
      summary: Allows clients to register any identity.
      tags:
      - Crypto
securityDefinitions:
  BearerAuth:
    description: '(Optional): Type "Bearer" followed by a space and your API key.'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
